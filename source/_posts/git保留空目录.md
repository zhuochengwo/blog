---
title: Git保留空目录
tags:
  - Git
id: '300'
categories:
  - - Git
  - - 敲代码
date: 2018-10-09 19:16:39
---

### 场景

使用`git`的时候，会有这样的需求，希望项目的某些目录内容被忽略（如日志，缓存等运行时相关的目录），但保留空目录，这样别人接入这个项目的时候不需要再去创建这些目录。 `git`和 `svn`不同，仅仅跟踪文件的变动，不跟踪目录。一个空目录，如果里面没有文件，即便 `git add` 这个目录，另外在别处 `git clone` 项目的时候，是没有这个空目录的。 **下边分情况来说明怎么处理。**

### 一、新建目录

新建目录的同时在目录下创建`.gitignore`文件，在文件中写入

```vim
*
!.gitignore
```

使用`git add`将目录中的`.gitignore`提交到暂存区，然后再在项目根目录中的`.gitignore`文件中添加对此目录的忽略。 因为新建目录中的`.gitignore`文件在忽略前已经提交，随后添加的对目录的忽略对它没有影响，最后对所有修改一起提交至版本库，这样新建的目录因为`.gitignore`在版本库中而得以保留。

### 二、目录已被忽略

如果目录先前已经忽略，此时希望在`git`中保留目录。 同样的，我们先在要保留的目录下新建`.gitignore`文件，写入同样的内容

```vim
*
!.gitignore
```

此时我们通过`git status`是看不到有任何修改记录的，因为整个目录已经被忽略。 我们可以通过

```vim
git add -f directory/.gitignore
```

强行将被忽略目录中的`.gitignore`提交到暂存区，其中`directory`为被忽略的目录，最后`git commit`提交到版本库即可 第一种情况下，如果我们先忽略目录，再新建目录也可以用同样的方式处理 **好了，这样就可以提交空目录到我们项目中了。**